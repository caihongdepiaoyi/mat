/*! For license information please see main.701e749a.chunk.js.LICENSE.txt */
(this.webpackJsonpmat=this.webpackJsonpmat||[]).push([[0],{35:function(t,e,n){},37:function(t,e,n){"use strict";n.r(e);n(30);var r=n(0),o=n.n(r),i=n(11),a=n.n(i),c=(n(35),n(5)),s=n(2),u=n(27),l=n(41),f=n(42),h=n(1),d=Object(c.b)({key:"themeState",default:"light"}),p=function(){var t=Object(c.d)(d),e=Object(s.a)(t,2),n=e[0],r=e[1];return Object(h.jsx)("div",{className:"theme-toggle-ui",children:Object(h.jsx)("div",{className:"theme-btn",onClick:function(){r("light"===n?"dark":"light")},role:"button",tabIndex:0,"aria-hidden":"true",children:"light"===n?Object(h.jsx)(l.a,{}):Object(h.jsx)(f.a,{style:{color:"#ffcc00"}})})})},v=n(3),b=n(8),j=n(12),g=n(44),O=n(45),y=n(46),m=n(47),x=n(48),w=n(49),k=n(24),L=n(54),E=n(25),S=n(55);n(10);function C(t){for(var e=t.split(",")[0].split(":")[1].split(";")[0],n=atob(t.split(",")[1]),r=[],o=0;o<n.length;o+=1)r.push(n.charCodeAt(o));return new Blob([new Uint8Array(r)],{type:e})}function N(t,e){return new Promise((function(n,r){var o=t.src,i=t;i.onload=n,i.onerror=function(t){i.src=o,r(t)},i.src=e}))}function P(t){return 2===t.nativeEvent.button}function T(t){return 1===t.nativeEvent.button}function _(t,e,n){return fetch(t).then((function(t){return t.arrayBuffer()})).then((function(t){return new File([t],e,{type:n})}))}function M(){M=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(C){s=function(t,e,n){return t[e]=n}}function u(t,e,n,o){var i=e&&e.prototype instanceof h?e:h,a=Object.create(i.prototype),c=new L(o||[]);return r(a,"_invoke",{value:m(t,n,c)}),a}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(C){return{type:"throw",arg:C}}}t.wrap=u;var f={};function h(){}function d(){}function p(){}var v={};s(v,i,(function(){return this}));var b=Object.getPrototypeOf,j=b&&b(b(E([])));j&&j!==e&&n.call(j,i)&&(v=j);var g=p.prototype=h.prototype=Object.create(v);function O(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function y(t,e){function o(r,i,a,c){var s=l(t[r],t,i);if("throw"!==s.type){var u=s.arg,f=u.value;return f&&"object"==typeof f&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(f).then((function(t){u.value=t,a(u)}),(function(t){return o("throw",t,a,c)}))}c(s.arg)}var i;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return i=i?i.then(r,r):r()}})}function m(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return S()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=x(a,n);if(c){if(c===f)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function x(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=l(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function E(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return d.prototype=p,r(g,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:d,configurable:!0}),d.displayName=s(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,c,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},O(y.prototype),s(y.prototype,a,(function(){return this})),t.AsyncIterator=y,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new y(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(g),s(g,c,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=E,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;k(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}var I="".concat("");function D(t,e,n){return F.apply(this,arguments)}function F(){return(F=Object(j.a)(M().mark((function t(e,n,r){var o,i,a,c,s;return M().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(o=new FormData).append("image",e),void 0!==n?o.append("mask",C(n)):void 0!==r&&o.append("mask",r),t.prev=3,console.log(o),t.next=7,fetch("".concat(I,"/inpaint"),{method:"POST",body:o});case 7:if(!(i=t.sent).ok){t.next=15;break}return t.next=11,i.blob();case 11:return a=t.sent,console.log(a),c=i.headers.get("x-seed"),t.abrupt("return",{blob:URL.createObjectURL(a),seed:c});case 15:return t.next=17,i.text();case 17:throw s=t.sent,new Error(s);case 21:throw t.prev=21,t.t0=t.catch(3),new Error("Something went wrong: ".concat(t.t0));case 24:case"end":return t.stop()}}),t,null,[[3,21]])})))).apply(this,arguments)}function G(t,e,n){return H.apply(this,arguments)}function H(){return(H=Object(j.a)(M().mark((function t(e,n,r){var o,i,a,c;return M().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(o=new FormData).append("image",e),o.append("clicks",JSON.stringify(r)),null!==n&&o.append("mask",n),t.prev=4,t.next=7,fetch("".concat(I,"/interactive_seg"),{method:"POST",body:o});case 7:if(!(i=t.sent).ok){t.next=13;break}return t.next=11,i.blob();case 11:return a=t.sent,t.abrupt("return",{blob:URL.createObjectURL(a)});case 13:return t.next=15,i.text();case 15:throw c=t.sent,new Error(c);case 19:throw t.prev=19,t.t0=t.catch(4),new Error("Something went wrong: ".concat(t.t0));case 22:case"end":return t.stop()}}),t,null,[[4,19]])})))).apply(this,arguments)}var R=function(t){var e=t.children,n=t.border,r=t.className,o=t.disabled,i=t.icon,a=t.toolTip,c=t.tooltipPosition,s=t.onKeyDown,u=t.onClick,l=t.onDown,f=t.onUp,d=t.style;return Object(h.jsxs)("div",{role:"button","data-tooltip":a,style:d,onKeyDown:s,onClick:function(t){t.currentTarget.blur(),null===u||void 0===u||u()},onPointerDown:function(t){null===l||void 0===l||l(t.nativeEvent)},onPointerUp:function(t){null===f||void 0===f||f(t.nativeEvent)},tabIndex:-1,className:["btn-primary",e?"btn-primary-content":"",!0===o?"btn-primary-disabled":"",a?"info-tooltip":"",c?"info-tooltip-".concat(c):"",r,n?"btn-border":""].join(" "),children:[i,e?Object(h.jsx)("span",{children:e}):null]})};R.defaultProps={disabled:!1,border:!1};var Z=R;function A(t){var e=t.value,n=t.onChange,r=t.onClick,o=(t.label,t.min),i=t.max,a=((i||100)-(o||0))/100;return Object(h.jsx)("div",{className:"editor-brush-slider",children:Object(h.jsx)("input",{type:"range",step:a,min:o,max:i,value:e,onChange:function(t){t.preventDefault(),t.stopPropagation(),n(parseInt(t.currentTarget.value,10))},onClick:r})})}var V=Object(c.b)({key:"maskState",default:void 0}),z=Object(c.b)({key:"appState",default:{file:void 0,disableShortCuts:!1,isInpainting:!1,isInteractiveSeg:!1,isInteractiveSegRunning:!1,interactiveSegClicks:[]}}),U=Object(c.b)({key:"promptState",default:""}),W=Object(c.b)({key:"negativePromptState",default:""}),Y=Object(c.c)({key:"isInpainting",get:function(t){return(0,t.get)(z).isInpainting},set:function(t,e){var n=t.get,r=t.set,o=n(z);r(z,Object(v.a)(Object(v.a)({},o),{},{isInpainting:e}))}}),K=Object(c.c)({key:"fileState",get:function(t){return(0,t.get)(z).file},set:function(t,e){var n=t.get,r=t.set,o=n(z);r(z,Object(v.a)(Object(v.a)({},o),{},{file:e,interactiveSegClicks:[],isInteractiveSeg:!1,isInteractiveSegRunning:!1}))}}),B=Object(c.c)({key:"isInteractiveSegState",get:function(t){return(0,t.get)(z).isInteractiveSeg},set:function(t,e){var n=t.get,r=t.set,o=n(z);r(z,Object(v.a)(Object(v.a)({},o),{},{isInteractiveSeg:e}))}}),J=Object(c.c)({key:"isInteractiveSegRunningState",get:function(t){return(0,t.get)(z).isInteractiveSegRunning},set:function(t,e){var n=t.get,r=t.set,o=n(z);r(z,Object(v.a)(Object(v.a)({},o),{},{isInteractiveSegRunning:e}))}}),X=Object(c.c)({key:"interactiveSegClicksState",get:function(t){return(0,t.get)(z).interactiveSegClicks},set:function(t,e){var n=t.get,r=t.set,o=n(z);r(z,Object(v.a)(Object(v.a)({},o),{},{interactiveSegClicks:e}))}}),$=Object(c.b)({key:"croperState",default:{x:0,y:0,width:512,height:512}}),Q=(Object(c.c)({key:"croperX",get:function(t){return(0,t.get)($).x},set:function(t,e){var n=t.get,r=t.set,o=n($);r($,Object(v.a)(Object(v.a)({},o),{},{x:e}))}}),Object(c.c)({key:"croperY",get:function(t){return(0,t.get)($).y},set:function(t,e){var n=t.get,r=t.set,o=n($);r($,Object(v.a)(Object(v.a)({},o),{},{y:e}))}}),Object(c.c)({key:"croperHeight",get:function(t){return(0,t.get)($).height},set:function(t,e){var n=t.get,r=t.set,o=n($);r($,Object(v.a)(Object(v.a)({},o),{},{height:e}))}}),Object(c.c)({key:"croperWidth",get:function(t){return(0,t.get)($).width},set:function(t,e){var n=t.get,r=t.set,o=n($);r($,Object(v.a)(Object(v.a)({},o),{},{width:e}))}}),Object(c.b)({key:"toastState",default:{open:!1,desc:"",state:"default",duration:3e3}})),q=Object(c.b)({key:"shortcutsState",default:!1}),tt=n(26),et="prompt",nt="custom_mask",rt=Object(tt.a)(),ot=function(){var t=Object(r.useState)(window.innerWidth),e=Object(s.a)(t,2),n=e[0],o=e[1],i=Object(r.useCallback)((function(){o(window.innerWidth)}),[]);return Object(r.useEffect)((function(){return window.addEventListener("resize",i),function(){window.removeEventListener("resize",i)}})),n<768?"mobile":n>=768&&n<1224?"tablet":n>=1224?"desktop":void 0};function it(){it=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(C){s=function(t,e,n){return t[e]=n}}function u(t,e,n,o){var i=e&&e.prototype instanceof h?e:h,a=Object.create(i.prototype),c=new L(o||[]);return r(a,"_invoke",{value:m(t,n,c)}),a}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(C){return{type:"throw",arg:C}}}t.wrap=u;var f={};function h(){}function d(){}function p(){}var v={};s(v,i,(function(){return this}));var b=Object.getPrototypeOf,j=b&&b(b(E([])));j&&j!==e&&n.call(j,i)&&(v=j);var g=p.prototype=h.prototype=Object.create(v);function O(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function y(t,e){function o(r,i,a,c){var s=l(t[r],t,i);if("throw"!==s.type){var u=s.arg,f=u.value;return f&&"object"==typeof f&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(f).then((function(t){u.value=t,a(u)}),(function(t){return o("throw",t,a,c)}))}c(s.arg)}var i;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return i=i?i.then(r,r):r()}})}function m(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return S()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=x(a,n);if(c){if(c===f)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function x(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=l(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function E(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return d.prototype=p,r(g,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:d,configurable:!0}),d.displayName=s(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,c,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},O(y.prototype),s(y.prototype,a,(function(){return this})),t.AsyncIterator=y,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new y(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(g),s(g,c,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=E,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;k(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}function at(t){var e=t.onSelection,n=Object(r.useState)(!1),o=Object(s.a)(n,2),i=o[0],a=o[1],c=Object(r.useState)("file-upload-".concat(Math.random().toString())),u=Object(s.a)(c,1)[0];ot();function l(t){if(t&&t.type.match("image.*"))try{if(t.size>20971520)throw new Error("file too large");e(t)}catch(n){alert("error: ".concat(n.message))}}function f(t){return d.apply(this,arguments)}function d(){return(d=Object(j.a)(it().mark((function t(e){return it().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){e.file((function(e){return t(e)}))})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function p(t){return v.apply(this,arguments)}function v(){return(v=Object(j.a)(it().mark((function t(e){var n,r,o,i,a;return it().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=[],r=[],o=0;o<e.length;o+=1)r.push(e[o].webkitGetAsEntry());case 3:if(!(r.length>0)){t.next=23;break}if(!(null===(i=r.shift())||void 0===i?void 0:i.isFile)){t.next=12;break}return t.next=8,f(i);case 8:a=t.sent,n.push(a),t.next=21;break;case 12:if(!(null===i||void 0===i?void 0:i.isDirectory)){t.next=21;break}return t.t0=r.push,t.t1=r,t.t2=b.a,t.next=18,g(i.createReader());case 18:t.t3=t.sent,t.t4=(0,t.t2)(t.t3),t.t0.apply.call(t.t0,t.t1,t.t4);case 21:t.next=3;break;case 23:return t.abrupt("return",n);case 24:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function g(t){return O.apply(this,arguments)}function O(){return(O=Object(j.a)(it().mark((function t(e){var n,r;return it().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=[],t.next=3,y(e);case 3:r=t.sent;case 4:if(!(r.length>0)){t.next=11;break}return n.push.apply(n,Object(b.a)(r)),t.next=8,y(e);case 8:r=t.sent,t.next=4;break;case 11:return t.abrupt("return",n);case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function y(t){return m.apply(this,arguments)}function m(){return(m=Object(j.a)(it().mark((function t(e){return it().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){e.readEntries(t,n)})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function x(){return(x=Object(j.a)(it().mark((function t(e){var n;return it().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),t.next=3,p(e.dataTransfer.items);case 3:n=t.sent,a(!1),l(n[0]);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(h.jsx)("label",{htmlFor:u,className:"file-select-label",children:Object(h.jsxs)("div",{className:["file-select-container",i?"file-select-label-hover":""].join(" "),onDrop:function(t){return x.apply(this,arguments)},onDragOver:function(t){t.stopPropagation(),t.preventDefault(),a(!0)},onDragLeave:function(){return a(!1)},children:[Object(h.jsx)("input",{id:u,name:u,type:"file",onChange:function(t){var e,n=null===(e=t.currentTarget.files)||void 0===e?void 0:e[0];n&&l(n)},accept:"image/png, image/jpeg"}),Object(h.jsx)("p",{className:"file-select-message",children:"\u70b9\u51fb\u6216\u8005\u62d6\u62fd\u81f3\u6b64\u533a\u57df\u4e0a\u4f20\u56fe\u7247"})]})})}var ct=function(t){var e=t.x,n=t.y,r=t.positive?"click-item-positive":"click-item-negative";return Object(h.jsx)("div",{className:"click-item ".concat(r),style:{left:e,top:n}})},st=function(){var t=Object(c.e)(X);return Object(h.jsx)("div",{className:"interactive-seg-wrapper",children:t.map((function(t){return Object(h.jsx)(ct,{x:t[0],y:t[1],positive:1===t[2]},t[3])}))})},ut=function(t){var e=t.onCancelClick,n=t.onAcceptClick,r=Object(c.d)(B),o=Object(s.a)(r,2),i=o[0],a=o[1],u=Object(c.d)(J),l=Object(s.a)(u,2),f=(l[0],l[1]),d=Object(c.d)(X),p=Object(s.a)(d,2),v=(p[0],p[1]),b=function(){a(!1),f(!1),v([])};return Object(h.jsx)("div",{className:"interactive-seg-confirm-actions",style:{visibility:i?"visible":"hidden"},children:Object(h.jsxs)("div",{className:"action-buttons",children:[Object(h.jsx)(Z,{onClick:function(){b(),e()},children:"\u53d6 \u6d88"}),Object(h.jsx)(Z,{border:!0,onClick:function(){b(),n()},children:"\u786e \u5b9a"})]})})},lt=n(43),ft=n(16),ht=o.a.forwardRef((function(t,e){var n=t.show,r=t.children,o=t.onClose,i=t.className,a=t.title,u=t.showCloseIcon,l=Object(c.d)(z),f=Object(s.a)(l,2),d=(f[0],f[1]);return Object(h.jsx)(ft.d,{open:n,onOpenChange:function(t){t||(null===o||void 0===o||o(),d((function(t){return Object(v.a)(Object(v.a)({},t),{},{disableShortCuts:!1})})))},children:Object(h.jsxs)(ft.c,{children:[Object(h.jsx)(ft.b,{className:"modal-mask"}),Object(h.jsxs)(ft.a,{ref:e,className:"modal ".concat(i),children:[Object(h.jsxs)("div",{className:"modal-header",children:[Object(h.jsx)(ft.e,{children:a}),u?Object(h.jsx)(Z,{icon:Object(h.jsx)(lt.a,{}),onClick:o}):Object(h.jsx)(h.Fragment,{})]}),r]})]})})}));ht.defaultProps={showCloseIcon:!0};var dt=ht,pt=function(t){var e=t.show,n=t.onClose,r=t.onCleanClick,o=t.onReplaceClick;return Object(h.jsxs)(dt,{onClose:n,title:"Mask exists",className:"modal-setting",show:e,showCloseIcon:!0,children:[Object(h.jsx)("h4",{style:{lineHeight:"24px"},children:"Do you want to remove it or create a new one?"}),Object(h.jsxs)("div",{style:{display:"flex",width:"100%",justifyContent:"flex-end",alignItems:"center",gap:"12px"},children:[Object(h.jsx)(Z,{onClick:function(){n(),r()},children:"Remove"}),Object(h.jsx)(Z,{onClick:o,border:!0,children:"Create a new one"})]})]})};function vt(){vt=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(C){s=function(t,e,n){return t[e]=n}}function u(t,e,n,o){var i=e&&e.prototype instanceof h?e:h,a=Object.create(i.prototype),c=new L(o||[]);return r(a,"_invoke",{value:m(t,n,c)}),a}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(C){return{type:"throw",arg:C}}}t.wrap=u;var f={};function h(){}function d(){}function p(){}var v={};s(v,i,(function(){return this}));var b=Object.getPrototypeOf,j=b&&b(b(E([])));j&&j!==e&&n.call(j,i)&&(v=j);var g=p.prototype=h.prototype=Object.create(v);function O(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function y(t,e){function o(r,i,a,c){var s=l(t[r],t,i);if("throw"!==s.type){var u=s.arg,f=u.value;return f&&"object"==typeof f&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(f).then((function(t){u.value=t,a(u)}),(function(t){return o("throw",t,a,c)}))}c(s.arg)}var i;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return i=i?i.then(r,r):r()}})}function m(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return S()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=x(a,n);if(c){if(c===f)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function x(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=l(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function E(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return d.prototype=p,r(g,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:d,configurable:!0}),d.displayName=s(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,c,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},O(y.prototype),s(y.prototype,a,(function(){return this})),t.AsyncIterator=y,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new y(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(g),s(g,c,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=E,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;k(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}var bt="#ffcc00bb",jt=!1;function gt(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:bt;t.strokeStyle=n,t.lineCap="round",t.lineJoin="round",e.forEach((function(e){(null===e||void 0===e?void 0:e.pts.length)&&e.size&&(t.lineWidth=e.size,t.beginPath(),t.moveTo(e.pts[0].x,e.pts[0].y),e.pts.forEach((function(e){return t.lineTo(e.x,e.y)})),t.stroke())}))}function Ot(t){var e=t.nativeEvent;return{x:e.offsetX,y:e.offsetY}}var yt=function(){var t=Object(c.d)(K),e=Object(s.a)(t,2),n=e[0],o=e[1],i=Object(c.e)(U),a=Object(c.e)(W),u=Object(c.e)($),l=Object(c.d)(Q),f=Object(s.a)(l,2),d=(f[0],f[1]),p=Object(c.d)(Y),v=Object(s.a)(p,2),C=v[0],M=v[1],I=Object(c.d)(B),F=Object(s.a)(I,2),H=F[0],R=F[1],V=Object(c.d)(J),z=Object(s.a)(V,2),q=z[0],tt=z[1],ot=Object(r.useState)(!1),it=Object(s.a)(ot,2),ct=it[0],lt=it[1],ft=Object(r.useState)(null),ht=Object(s.a)(ft,2),dt=ht[0],bt=ht[1],yt=Object(r.useState)(null),mt=Object(s.a)(yt,2),xt=mt[0],wt=mt[1],kt=Object(r.useState)(null),Lt=Object(s.a)(kt,2),Et=Lt[0],St=Lt[1],Ct=Object(c.d)(X),Nt=Object(s.a)(Ct,2),Pt=Nt[0],Tt=Nt[1],_t=Object(r.useState)(40),Mt=Object(s.a)(_t,2),It=Mt[0],Dt=Mt[1],Ft=function(t){var e=Object(r.useState)(new Image),n=Object(s.a)(e,1)[0],o=Object(r.useState)(!1),i=Object(s.a)(o,2),a=i[0],c=i[1];return Object(r.useEffect)((function(){if(void 0!==t)return n.onload=function(){c(!0)},c(!1),n.src=URL.createObjectURL(t),function(){n.onload=null}}),[t,n]),[n,a]}(n),Gt=Object(s.a)(Ft,2),Ht=Gt[0],Rt=Gt[1],Zt=Object(r.useState)([]),At=Object(s.a)(Zt,2),Vt=At[0],zt=At[1],Ut=Object(r.useState)(),Wt=Object(s.a)(Ut,2),Yt=Wt[0],Kt=Wt[1],Bt=Object(r.useState)((function(){return document.createElement("canvas")})),Jt=Object(s.a)(Bt,1)[0],Xt=Object(r.useState)([]),$t=Object(s.a)(Xt,2),Qt=$t[0],qt=$t[1],te=Object(r.useState)([]),ee=Object(s.a)(te,2),ne=ee[0],re=ee[1],oe=Object(r.useState)([]),ie=Object(s.a)(oe,2),ae=ie[0],ce=ie[1],se=Object(r.useState)({x:-1,y:-1}),ue=Object(s.a)(se,2),le=ue[0],fe=le.x,he=le.y,de=ue[1],pe=Object(r.useState)(!1),ve=Object(s.a)(pe,2),be=ve[0],je=ve[1],ge=Object(r.useState)(!1),Oe=Object(s.a)(ge,2),ye=Oe[0],me=Oe[1],xe=Object(r.useState)(!1),we=Object(s.a)(xe,2),ke=we[0],Le=we[1],Ee=Object(r.useState)(!1),Se=Object(s.a)(Ee,2),Ce=Se[0],Ne=Se[1],Pe=Object(r.useState)({x:-1,y:-1,brushSize:20}),Te=Object(s.a)(Pe,2),_e=Te[0],Me=(Te[1],Object(r.useState)(!1)),Ie=Object(s.a)(Me,2),De=Ie[0],Fe=Ie[1],Ge=Object(r.useState)(1),He=Object(s.a)(Ge,2),Re=He[0],Ze=He[1],Ae=Object(r.useState)(!1),Ve=Object(s.a)(Ae,2),ze=Ve[0],Ue=Ve[1],We=Object(r.useState)(1),Ye=Object(s.a)(We,2),Ke=Ye[0],Be=Ye[1],Je=Object(r.useState)(1080),Xe=Object(s.a)(Je,2),$e=Xe[0],Qe=Xe[1],qe=Object(L.a)(),tn=qe.width/2,en=qe.height/2,nn=Object(r.useRef)(),rn=Object(r.useState)(!1),on=Object(s.a)(rn,2),an=on[0],cn=on[1],sn=Object(r.useState)(!1),un=Object(s.a)(sn,2),ln=un[0],fn=un[1],hn=Object(r.useState)(!1),dn=Object(s.a)(hn,2),pn=dn[0],vn=dn[1],bn=Object(r.useState)(0),jn=Object(s.a)(bn,2),gn=jn[0],On=jn[1],yn=Object(r.useState)([]),mn=Object(s.a)(yn,2),xn=mn[0],wn=mn[1],kn=Object(r.useState)([]),Ln=Object(s.a)(kn,2),En=Ln[0],Sn=Ln[1],Cn=Object(r.useState)([]),Nn=Object(s.a)(Cn,2),Pn=Nn[0],Tn=Nn[1],_n=Object(r.useCallback)((function(t,e){Yt&&(Yt.clearRect(0,0,Yt.canvas.width,Yt.canvas.height),Yt.drawImage(t,0,0,Ht.naturalWidth,Ht.naturalHeight),H&&null!==xt&&Yt.drawImage(xt,0,0,Ht.naturalWidth,Ht.naturalHeight),H||null===dt||Yt.drawImage(dt,0,0,Ht.naturalWidth,Ht.naturalHeight),gt(Yt,e))}),[Yt,Ht,H,xt,dt]),Mn=Object(r.useCallback)((function(t,e){if(!(null===Yt||void 0===Yt?void 0:Yt.canvas.width)||!(null===Yt||void 0===Yt?void 0:Yt.canvas.height))throw new Error("canvas has invalid size");Jt.width=null===Yt||void 0===Yt?void 0:Yt.canvas.width,Jt.height=null===Yt||void 0===Yt?void 0:Yt.canvas.height;var n=Jt.getContext("2d");if(!n)throw new Error("could not retrieve mask canvas");void 0!==e&&null!==e&&n.drawImage(e,0,0,Ht.naturalWidth,Ht.naturalHeight),t.forEach((function(t){gt(n,t,"white")}))}),[Yt,Jt]),In=Object(r.useCallback)((function(){return 0!==ae.length}),[ae]),Dn=Object(r.useCallback)((function(t){0===Vt.length?_n(Ht,t):_n(Vt[Vt.length-1],t)}),[Ht,Vt,_n]),Fn=Object(r.useCallback)(function(){var t=Object(j.a)(vt().mark((function t(e,r,o){var i,a,c,s,u,l,f,h,p,v,j,g,O;return vt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==n){t.next=2;break}return t.abrupt("return");case 2:if(i=void 0!==r&&null!==r,a=void 0!==o&&null!==o,console.log("runInpainting"),console.log({useCustomMask:i,useMaskImage:a}),c=[],!0!==e){t.next=13;break}if(0!==ne.length){t.next=10;break}return t.abrupt("return");case 10:c=ne,t.next=18;break;case 13:if(i){t.next=18;break}if(In()||a){t.next=16;break}return t.abrupt("return");case 16:re(ae),c=ae;case 18:if(s=[].concat(Object(b.a)(Qt),[c]),ce([]),fn(!1),M(!0),Mn([c],o),u=n,!0!==e){t.next=33;break}if(!(Vt.length>1)){t.next=31;break}return l=Vt[Vt.length-2],t.next=30,_(l.currentSrc,n.name,n.type);case 30:u=t.sent;case 31:t.next=39;break;case 33:if(!(Vt.length>0)){t.next=39;break}return console.info("gradually inpainting on last result"),f=Vt[Vt.length-1],t.next=38,_(f.currentSrc,n.name,n.type);case 38:u=t.sent;case 39:return 42,console.log({useCustomMask:i}),t.prev=41,d({open:!0,desc:"\u8bf7\u7a0d\u7b49\u51e0\u79d2,\u56fe\u7247\u6b63\u5728\u4fee\u590d\u4e2d",state:"default",duration:4e3}),t.next=45,D(u,i?void 0:Jt.toDataURL(),i?r:void 0);case 45:if(h=t.sent){t.next=48;break}throw new Error("Something went wrong on server side.");case 48:return p=h.blob,h.seed,v=new Image,t.next=52,N(v,p);case 52:!0===e?(j=Vt.slice(0,-1),g=[].concat(Object(b.a)(j),[v]),zt(g)):(O=[].concat(Object(b.a)(Vt),[v]),zt(O)),_n(v,[]),qt(s),Zn(),d({open:!0,desc:"\u5df2\u6210\u529f\u4fee\u590d",state:"default",duration:4e3}),t.next=63;break;case 59:t.prev=59,t.t0=t.catch(41),d({open:!0,desc:t.t0.message?t.t0.message:t.t0.toString(),state:"error",duration:4e3}),Dn([]);case 63:M(!1),St(o),wt(null),bt(null);case 67:case"end":return t.stop()}}),t,null,[[41,59]])})));return function(e,n,r){return t.apply(this,arguments)}}(),[Qt,ae,Jt,!0,u,$e,i,a,Dn,In,Mn]);Object(r.useEffect)((function(){return rt.on(et,(function(){In()||dt?Fn(!1,void 0,dt):0!==ne.length?Fn(!0,void 0,Et):Et?Fn(!1,void 0,Et):d({open:!0,desc:"Please draw mask on picture",state:"error",duration:1500})})),function(){rt.off(et)}}),[In,Fn,i,dt,Et]),Object(r.useEffect)((function(){return rt.on(nt,(function(t){Fn(!1,t.mask)})),function(){rt.off(nt)}}),[Fn]);var Gn=function(){return 0!==Vt.length},Hn=function(t){return"Control"===t.key||"Meta"===t.key};Object(E.a)(Hn,(function(){pn&&(C||vn(!1))}),{event:"keyup"},[C,pn,In]),Object(E.a)(Hn,(function(){C||vn(!0)}),{event:"keydown"},[C]),Object(r.useEffect)((function(){if(Rt){var t=qe.width/Ht.naturalWidth,e=(qe.height-200)/Ht.naturalHeight,n=1;if((t<1||e<1)&&(n=Math.min(t,e)),Be(n),Ze(n),(null===Yt||void 0===Yt?void 0:Yt.canvas)&&(Yt.canvas.width=Ht.naturalWidth,Yt.canvas.height=Ht.naturalHeight,Dn([])),!an){var r;null===(r=nn.current)||void 0===r||r.centerView(n,1),cn(!0);var o=Math.max(Ht.width,Ht.height);Qe(o)}}}),[null===Yt||void 0===Yt?void 0:Yt.canvas,nn,Ht,Rt,qe,an,Dn]);var Rn=Object(r.useCallback)((function(){if(Ke&&Ht&&qe){var t=nn.current;if(t){var e=(qe.width-Ht.width*Ke)/2,n=(qe.height-Ht.height*Ke)/2;t.setTransform(e,n,Ke,200,"easeOutQuad"),t.state.scale=Ke,Ze(Ke),Ue(!1)}}}),[nn,qe,Ht,Ht.width,qe.height,Ke]),Zn=function(){Sn([]),Tn([]),wn([])};Object(r.useEffect)((function(){return window.addEventListener("resize",(function(){Rn()})),function(){window.removeEventListener("resize",(function(){Rn()}))}}),[qe,Rn]),Object(r.useEffect)((function(){return window.addEventListener("blur",(function(){Ne(!1)})),function(){window.removeEventListener("blur",(function(){Ne(!1)}))}}),[]);var An=Object(r.useCallback)((function(){R(!1),tt(!1),Tt([]),wt(null)}),[]);Object(E.a)("Escape",(function(){C||(H?An():ln||pn?(fn(!1),ce([]),Dn([])):Rn())}),{event:"keydown"},[ln,C,pn,H,An,Rn,Dn]);var Vn=function(t){if(Ce){var e=_e.x,n=_e.brushSize+(fe-e);n<=100&&n>=10&&Dt(n)}else if(!H&&!ke&&ln&&0!==ae.length){var r=Object(b.a)(ae);r[r.length-1].pts.push(Ot(t)),ce(r),Dn(r)}},zn=function(){var t=Object(j.a)(vt().mark((function t(e){var r,o,i,a,c;return vt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:if(tt(!0),r=n,!(Vt.length>0)){t.next=9;break}return o=Vt[Vt.length-1],t.next=8,_(o.currentSrc,n.name,n.type);case 8:r=t.sent;case 9:return null,t.prev=10,d({open:!0,desc:"\u8bf7\u60a8\u7a0d\u7b49",state:"default",duration:1500}),t.next=14,G(r,null,e);case 14:if(i=t.sent){t.next=17;break}throw new Error("Something went wrong on server side.");case 17:a=i.blob,(c=new Image).onload=function(){wt(c)},c.src=a,t.next=26;break;case 23:t.prev=23,t.t0=t.catch(10),d({open:!0,desc:t.t0.message?t.t0.message:t.t0.toString(),state:"error",duration:4e3});case 26:tt(!1);case 27:case"end":return t.stop()}}),t,null,[[10,23]])})));return function(e){return t.apply(this,arguments)}}(),Un=function(t){if(console.log(jt),!jt&&H){var e=Ot(t),n=Object(b.a)(Pt);P(t)?n.push([e.x,e.y,0,n.length]):n.push([e.x,e.y,1,n.length]),zn(n),Tt(n)}},Wn=function(t){if(!H&&(!Ce&&!ke&&Ht.src&&(null===Yt||void 0===Yt?void 0:Yt.canvas)&&!C&&!P(t)))if(T(t))Le(!0);else{0,fn(!0);var e=[];pn&&(e=Object(b.a)(ae)),e.push({size:It,pts:[Ot(t)]}),ce(e),Dn(e)}},Yn=Object(r.useCallback)((function(){if(0!==ae.length){re([]);var t=ae.pop(),e=[].concat(Object(b.a)(En),[t]);Sn(e);var n=Object(b.a)(ae);ce(n),Dn(n)}}),[ae,En,Dn]),Kn=Object(r.useCallback)((function(){if(Vt.length){var t=Qt.pop();Tn([].concat(Object(b.a)(Pn),[t])),Sn([]),qt(Object(b.a)(Qt)),ce([]),fn(!1);var e=Vt.pop();wn([].concat(Object(b.a)(xn),[e]));var n=Object(b.a)(Vt);zt(n),0===n.length?_n(Ht,[]):_n(n[n.length-1],[])}}),[_n,Vt,xn,Pn,Qt,Ht]),Bn=function(){Kn()};Object(E.a)((function(t){var e=(t.metaKey||t.ctrlKey)&&!t.shiftKey&&"z"===t.key;return"Tab"===t.key&&t.preventDefault(),!!e&&(t.preventDefault(),console.log("undo"),!0)}),Bn,void 0,[Yn,Kn]);var Jn=Object(r.useCallback)((function(){if(0!==En.length){var t=En.pop();Sn(Object(b.a)(En));var e=[].concat(Object(b.a)(ae),[t]);ce(e),Dn(e)}}),[ae,En,Dn]),Xn=Object(r.useCallback)((function(){if(0!==xn.length){var t=Pn.pop();Tn(Object(b.a)(Pn)),qt([].concat(Object(b.a)(Qt),[t])),ce([]),fn(!1);var e=xn.pop(),n=[].concat(Object(b.a)(Vt),[e]);zt(n),_n(n[n.length-1],[])}}),[_n,Vt,xn,Pn,Qt,Ht]),$n=function(){0!==En.length?Jn():Xn()};Object(E.a)((function(t){var e=(t.metaKey||t.ctrlKey)&&t.shiftKey&&"z"===t.key.toLowerCase();return"Tab"===t.key&&t.preventDefault(),!!e&&(t.preventDefault(),console.log("redo"),!0)}),$n,void 0,[Jn,Xn]),Object(S.a)("Tab",(function(t){null===t||void 0===t||t.preventDefault(),null===t||void 0===t||t.stopPropagation(),Gn()&&Fe((function(){return window.setTimeout((function(){On(100)}),10),!0}))}),(function(t){null===t||void 0===t||t.preventDefault(),null===t||void 0===t||t.stopPropagation(),Gn()&&(On(0),window.setTimeout((function(){Fe(!1)}),350))}));var Qn=function(t){t===be||ke||je(t)},qn=Object(r.useCallback)((function(){return ke?"grab":be?"none":void 0}),[be,ke]);Object(S.a)(" ",(function(t){null===t||void 0===t||t.preventDefault(),null===t||void 0===t||t.stopPropagation(),console.log("space click"),H&&(jt=!0),je(!1),Le(!0)}),(function(t){null===t||void 0===t||t.preventDefault(),null===t||void 0===t||t.stopPropagation(),jt?(je(!0),Le(!1),M(!1),jt=!1,R(!0)):(je(!0),Le(!1))}));var tr=function(t,e){var n=function(){var t,e,n=Ke;return void 0!==(null===(t=nn.current)||void 0===t?void 0:t.state.scale)&&(n=null===(e=nn.current)||void 0===e?void 0:e.state.scale),n}();return{width:"".concat(It*n,"px"),height:"".concat(It*n,"px"),left:"".concat(t,"px"),top:"".concat(e,"px"),transform:"translate(-50%, -50%)"}};return Object(h.jsxs)("div",{className:"editor-container","aria-hidden":"true",onMouseMove:function(t){var e=t.nativeEvent;de({x:e.pageX,y:e.pageY})},onMouseUp:function(t){(T(t)&&Le(!1),H)||(ke||Ht.src&&(null===Yt||void 0===Yt?void 0:Yt.canvas)&&(C||ln&&(pn?fn(!1):Fn())))},children:[Object(h.jsx)(ut,{onAcceptClick:function(){bt(xt),wt(null),xt&&Fn(!1,void 0,xt)},onCancelClick:An}),void 0===n?Object(h.jsx)("div",{className:"landing-file-selector",children:Object(h.jsx)(at,{onSelection:function(){var t=Object(j.a)(vt().mark((function t(e){return vt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o(e);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})}):Object(h.jsx)(k.b,{ref:function(t){t&&(nn.current=t)},panning:{disabled:!ke,velocityDisabled:!0},wheel:{step:.05},centerZoomedOut:!0,alignmentAnimation:{disabled:!0},limitToBounds:!1,doubleClick:{disabled:!0},initialScale:Ke,minScale:.6*Ke,onPanning:function(t){ze||Ue(!0)},onZoom:function(t){Ze(t.state.scale)},children:Object(h.jsxs)(k.a,{contentClass:C||q?"editor-canvas-loading":"",contentStyle:{visibility:an?"visible":"hidden"},children:[Object(h.jsxs)("div",{className:"editor-canvas-container",children:[Object(h.jsx)("canvas",{draggable:!0,className:"editor-canvas",style:{cursor:qn(),clipPath:"inset(0 ".concat(gn,"% 0 0)"),transition:"clip-path 300ms cubic-bezier(0.4, 0, 0.2, 1)"},onContextMenu:function(t){t.preventDefault()},onMouseOver:function(){Qn(!0),me(!1)},onFocus:function(){return Qn(!0)},onMouseLeave:function(){return Qn(!1)},onMouseDown:Wn,onMouseUp:Un,onMouseMove:Vn,ref:function(t){if(t&&!Yt){var e=t.getContext("2d");e&&Kt(e)}}}),Object(h.jsxs)("div",{className:"original-image-container",style:{width:"".concat(Ht.naturalWidth,"px"),height:"".concat(Ht.naturalHeight,"px")},children:[De&&Object(h.jsx)("div",{className:"editor-slider",style:{marginRight:"".concat(gn,"%")}}),Object(h.jsx)("img",{className:"original-image",src:Ht.src,alt:"original",style:{width:"".concat(Ht.naturalWidth,"px"),height:"".concat(Ht.naturalHeight,"px")}})]})]}),H?Object(h.jsx)(st,{}):Object(h.jsx)(h.Fragment,{})]})}),be&&!C&&!ke&&(H?Object(h.jsx)("div",{className:"interactive-seg-cursor",style:{left:"".concat(fe,"px"),top:"".concat(he,"px")},children:Object(h.jsx)(g.a,{})}):Object(h.jsx)("div",{className:"brush-shape",style:tr(Ce?_e.x:fe,Ce?_e.y:he)})),ye&&Object(h.jsx)("div",{className:"brush-shape",style:tr(tn,en)}),Object(h.jsxs)("div",{className:"editor-toolkit-panel",children:[Object(h.jsx)(Z,{tooltipPosition:"top",toolTip:"\u7b14\u5237",icon:Object(h.jsx)(O.a,{}),disabled:H||C||!Rt,onClick:function(){je(!0),R(!1),Le(!1)}}),Object(h.jsx)(A,{min:10,max:100,value:It,onChange:function(t){Dt(t),ye||(me(!0),window.setTimeout((function(){me(!1)}),1e4))},onClick:function(){return me(!1)}}),Object(h.jsxs)("div",{className:"editor-toolkit-btns",children:[Object(h.jsx)(Z,{toolTip:"\u5feb\u901f\u9009\u62e9\u5de5\u5177",tooltipPosition:"top",icon:Object(h.jsx)(g.a,{}),disabled:H||C||!Rt,onClick:function(){R(!0),Le(!1),null!==dt&&lt(!0)}}),Object(h.jsx)(Z,{toolTip:"\u62d6\u62fd",tooltipPosition:"top",icon:Object(h.jsx)(y.a,{}),disabled:ke||!Rt,onClick:function(){R(!1),je(!1),Le(!0)}}),Object(h.jsx)(Z,{toolTip:"\u6062\u590d\u6bd4\u4f8b",tooltipPosition:"top",icon:Object(h.jsx)(m.a,{}),disabled:Re===Ke&&!1===ze,onClick:Rn}),Object(h.jsx)(Z,{toolTip:"\u524d\u4e00\u6b65",tooltipPosition:"top",icon:Object(h.jsx)("svg",{width:"19",height:"9",viewBox:"0 0 19 9",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(h.jsx)("path",{d:"M2 1C2 0.447715 1.55228 0 1 0C0.447715 0 0 0.447715 0 1H2ZM1 8H0V9H1V8ZM8 9C8.55228 9 9 8.55229 9 8C9 7.44771 8.55228 7 8 7V9ZM16.5963 7.42809C16.8327 7.92721 17.429 8.14016 17.9281 7.90374C18.4272 7.66731 18.6402 7.07103 18.4037 6.57191L16.5963 7.42809ZM16.9468 5.83205L17.8505 5.40396L16.9468 5.83205ZM0 1V8H2V1H0ZM1 9H8V7H1V9ZM1.66896 8.74329L6.66896 4.24329L5.33104 2.75671L0.331035 7.25671L1.66896 8.74329ZM16.043 6.26014L16.5963 7.42809L18.4037 6.57191L17.8505 5.40396L16.043 6.26014ZM6.65079 4.25926C9.67554 1.66661 14.3376 2.65979 16.043 6.26014L17.8505 5.40396C15.5805 0.61182 9.37523 -0.710131 5.34921 2.74074L6.65079 4.25926Z",fill:"currentColor"})}),onClick:Bn,disabled:!!H||!!C||!(Vt.length>0)&&0===Vt.length}),Object(h.jsx)(Z,{toolTip:"\u540e\u4e00\u6b65",tooltipPosition:"top",icon:Object(h.jsx)("svg",{width:"19",height:"9",viewBox:"0 0 19 9",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:"scale(-1,1)"},children:Object(h.jsx)("path",{d:"M2 1C2 0.447715 1.55228 0 1 0C0.447715 0 0 0.447715 0 1H2ZM1 8H0V9H1V8ZM8 9C8.55228 9 9 8.55229 9 8C9 7.44771 8.55228 7 8 7V9ZM16.5963 7.42809C16.8327 7.92721 17.429 8.14016 17.9281 7.90374C18.4272 7.66731 18.6402 7.07103 18.4037 6.57191L16.5963 7.42809ZM16.9468 5.83205L17.8505 5.40396L16.9468 5.83205ZM0 1V8H2V1H0ZM1 9H8V7H1V9ZM1.66896 8.74329L6.66896 4.24329L5.33104 2.75671L0.331035 7.25671L1.66896 8.74329ZM16.043 6.26014L16.5963 7.42809L18.4037 6.57191L17.8505 5.40396L16.043 6.26014ZM6.65079 4.25926C9.67554 1.66661 14.3376 2.65979 16.043 6.26014L17.8505 5.40396C15.5805 0.61182 9.37523 -0.710131 5.34921 2.74074L6.65079 4.25926Z",fill:"currentColor"})}),onClick:$n,disabled:!!H||!!C||!(xn.length>0)&&0===xn.length}),Object(h.jsx)(Z,{toolTip:"\u5bf9\u6bd4",tooltipPosition:"top",icon:Object(h.jsx)(x.a,{}),className:De?"eyeicon-active":"",onDown:function(t){t.preventDefault(),Fe((function(){return window.setTimeout((function(){On(100)}),10),!0}))},onUp:function(){On(0),window.setTimeout((function(){Fe(!1)}),300)},disabled:0===Vt.length}),Object(h.jsx)(Z,{toolTip:"\u4fdd\u5b58",tooltipPosition:"top",icon:Object(h.jsx)(w.a,{}),disabled:!Vt.length,onClick:function(){if(void 0!==n){var t=n.name.replace(/(\.[\w\d_-]+)$/i,"_inpaint$1");!function(t,e){var n=document.createElement("a");n.href=t,n.download=e,n.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window})),setTimeout((function(){n.remove()}),100)}(Vt[Vt.length-1].currentSrc,t)}}})]})]}),Object(h.jsx)(pt,{show:ct,onClose:function(){An(),lt(!1)},onCleanClick:function(){An(),bt(null)},onReplaceClick:function(){lt(!1),R(!0)}})]})};function mt(t){var e=t.content,n=t.keys;return Object(h.jsxs)("div",{className:"shortcut-option",children:[Object(h.jsx)("div",{className:"shortcut-description",children:e}),Object(h.jsx)("div",{style:{display:"flex",justifySelf:"end",gap:"8px"},children:n.map((function(t,e){return Object(h.jsx)("div",{className:"shortcut-key",children:t},t)}))})]})}/macintosh|mac os x/i.test(navigator.userAgent),/windows|win32/i.test(navigator.userAgent);function xt(){var t=Object(c.d)(q),e=Object(s.a)(t,2),n=e[0],r=e[1];return Object(h.jsx)(dt,{onClose:function(){r(!1)},title:"\u5982\u4f55\u4f7f\u7528&&\u5feb\u6377\u952e",className:"modal-shortcuts",show:n,children:Object(h.jsxs)("div",{className:"shortcut-options",children:[Object(h.jsx)("div",{children:"1. \u70b9\u51fb\u4e0a\u4f20\u6216\u8005\u62d6\u62fd\u56fe\u7247\u81f3\u7f51\u9875"}),Object(h.jsx)("div",{children:"2. \u4f7f\u7528\u7b14\u5237\u9009\u62e9\u60f3\u8981\u53bb\u9664\u7684\u533a\u57df"}),Object(h.jsx)("div",{children:"3. \u6216\u8005\u53ef\u4ee5\u4f7f\u7528\u5feb\u901f\u9009\u62e9\u5de5\u5177\u8fdb\u884c\u9009\u62e9"}),Object(h.jsx)("div",{children:"4. \u9009\u62e9\u540e\u7b49\u5f85\u51e0\u79d2\u5373\u53ef\u5f97\u5230\u4fee\u590d\u540e\u7684\u56fe\u7247"}),Object(h.jsx)("br",{}),Object(h.jsx)(mt,{content:"\u56fe\u7247\u62d6\u62fd",keys:["\u7a7a\u683c + \u9f20\u6807\u5de6\u952e"]}),Object(h.jsx)(mt,{content:"\u56fe\u7247\u7f29\u653e",keys:["\u9f20\u6807\u4e2d\u952e"]})]})})}var wt=n(4),kt=n(18),Lt=n(50),Et=n(51),St=["state","desc"],Ct=function(){return Object(h.jsx)("span",{className:"loading-icon",children:Object(h.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[Object(h.jsx)("line",{x1:"12",y1:"2",x2:"12",y2:"6"}),Object(h.jsx)("line",{x1:"12",y1:"18",x2:"12",y2:"22"}),Object(h.jsx)("line",{x1:"4.93",y1:"4.93",x2:"7.76",y2:"7.76"}),Object(h.jsx)("line",{x1:"16.24",y1:"16.24",x2:"19.07",y2:"19.07"}),Object(h.jsx)("line",{x1:"2",y1:"12",x2:"6",y2:"12"}),Object(h.jsx)("line",{x1:"18",y1:"12",x2:"22",y2:"12"}),Object(h.jsx)("line",{x1:"4.93",y1:"19.07",x2:"7.76",y2:"16.24"}),Object(h.jsx)("line",{x1:"16.24",y1:"7.76",x2:"19.07",y2:"4.93"})]})})},Nt=r.forwardRef((function(t,e){var n=t.state,r=t.desc,o=Object(wt.a)(t,St);return Object(h.jsxs)(kt.b,{children:[Object(h.jsxs)(kt.c,Object(v.a)(Object(v.a)({},o),{},{ref:e,className:"toast-root ".concat(n),children:[Object(h.jsx)("div",{className:"toast-icon",children:function(){switch(n){case"error":return Object(h.jsx)(Lt.a,{className:"error-icon"});case"success":return Object(h.jsx)(Et.a,{className:"success-icon"});case"loading":return Object(h.jsx)(Ct,{});default:return Object(h.jsx)(h.Fragment,{})}}()}),Object(h.jsx)(kt.a,{className:"toast-desc",children:r})]})),Object(h.jsx)(kt.d,{className:"toast-viewpoint"})]})}));Nt.defaultProps={desc:"",state:"loading"};var Pt=Nt,Tt=function(){var t=Object(c.d)(Q),e=Object(s.a)(t,2),n=e[0],r=e[1];return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(yt,{}),Object(h.jsx)(xt,{}),Object(h.jsx)(Pt,Object(v.a)(Object(v.a)({},n),{},{onOpenChange:function(t){r((function(e){return Object(v.a)(Object(v.a)({},e),{},{open:t})}))}}))]})},_t=n(52),Mt=n(53),It=function(){var t=Object(c.e)(Y),e=Object(c.d)(K),n=Object(s.a)(e,2),o=(n[0],n[1]),i=Object(c.d)(V),a=Object(s.a)(i,2),u=(a[0],a[1],Object(r.useState)("file-upload-".concat(Math.random().toString()))),l=Object(s.a)(u,1)[0],f=Object(r.useState)("mask-upload-".concat(Math.random().toString())),d=(Object(s.a)(f,1)[0],Object(c.d)(q)),v=Object(s.a)(d,2),b=(v[0],v[1]),j=function(){b(!0)};return Object(h.jsxs)("header",{children:[Object(h.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:8},children:Object(h.jsx)("label",{htmlFor:l,children:Object(h.jsxs)(Z,{icon:Object(h.jsx)(_t.a,{}),style:{border:0},disabled:t,toolTip:"\u6253\u5f00\u56fe\u7247",tooltipPosition:"bottom",children:[Object(h.jsx)("input",{style:{display:"none"},id:l,name:l,type:"file",onChange:function(t){var e,n=null===(e=t.currentTarget.files)||void 0===e?void 0:e[0];n&&o(n)},accept:"image/png, image/jpeg"}),"\u4e0a\u4f20"]})})}),Object(h.jsxs)("div",{className:"header-icons-wrapper",children:[Object(h.jsx)(Z,{toolTip:"\u5e2e\u52a9",tooltipPosition:"bottom",icon:Object(h.jsx)(Mt.a,{}),onClick:j}),Object(h.jsx)(p,{})]})]})},Dt=["image/jpeg","image/png","image/webp","image/bmp","image/tiff"];var Ft=function(){var t=Object(c.d)(K),e=Object(s.a)(t,2),n=e[0],i=e[1],a=Object(c.d)(d),l=Object(s.a)(a,2),f=l[0],p=(l[1],Object(c.d)(Q)),v=Object(s.a)(p,2),b=(v[0],v[1]);Object(r.useEffect)((function(){document.body.setAttribute("data-theme",f)}),[f]);var j=Object(r.useMemo)((function(){return Object(u.a)()}),[n]),g=o.a.useState(!1),O=Object(s.a)(g,2),y=(O[0],O[1]),m=o.a.useRef(0),x=o.a.useCallback((function(t){t.preventDefault(),t.stopPropagation()}),[]),w=o.a.useCallback((function(t){t.preventDefault(),t.stopPropagation(),m.current+=1,t.dataTransfer.items&&t.dataTransfer.items.length>0&&y(!0)}),[]),k=o.a.useCallback((function(t){t.preventDefault(),t.stopPropagation(),m.current-=1,m.current>0||y(!1)}),[]),L=o.a.useCallback((function(t){if(t.preventDefault(),t.stopPropagation(),y(!1),t.dataTransfer.files&&t.dataTransfer.files.length>0){if(t.dataTransfer.files.length>1)b({open:!0,desc:"Please drag and drop only one file",state:"error",duration:3e3});else{var e=t.dataTransfer.files[0],n=e.type;Dt.includes(n)?i(e):b({open:!0,desc:"Please drag and drop an image file",state:"error",duration:3e3})}t.dataTransfer.clearData()}}),[]),E=Object(r.useCallback)((function(t){if(t.clipboardData){var e=t.clipboardData.items,n=[].slice.call(e).filter((function(t){return-1!==t.type.indexOf("image")}));if(0!==n.length){t.preventDefault(),t.stopPropagation();var r=n[0].getAsFile();r&&i(r)}}}),[]);return o.a.useEffect((function(){return window.addEventListener("dragenter",w),window.addEventListener("dragleave",k),window.addEventListener("dragover",x),window.addEventListener("drop",L),window.addEventListener("paste",E),function(){window.removeEventListener("dragenter",w),window.removeEventListener("dragleave",k),window.removeEventListener("dragover",x),window.removeEventListener("drop",L),window.removeEventListener("paste",E)}})),Object(h.jsxs)("div",{className:"mat",children:[Object(h.jsx)(It,{}),Object(h.jsx)(Tt,{},j)]})};a.a.render(Object(h.jsx)(o.a.StrictMode,{children:Object(h.jsx)(c.a,{children:Object(h.jsx)(Ft,{})})}),document.getElementById("root"))}},[[37,1,2]]]);